<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.kosta.momsbay.model.mapper.PointHistoryMapper">
	<select id="getPointHistoryById" resultType="pointHistoryVO">
		SELECT t.type, h.regdate, h.price, h.id, h.now_point as point
		FROM POINT_TYPE t, POINT_HISTORY h
		WHERE t.point_type_no=h.point_type_no
		AND id=#{values} 
		ORDER BY h.regdate DESC
	</select>
	
	<insert id="addPointChargeHistory" parameterType="map">
		INSERT INTO point_history
		VALUES(point_history_SEQ.nextval, sysdate, #{point}, #{id}, 3, #{nowPoint})
	</insert>
	
	<insert id="addPointExchangeHistory" parameterType="map">
		INSERT INTO point_history
		VALUES(point_history_SEQ.nextval, sysdate, #{point}, #{id}, 4, #{nowPoint})
	</insert>
</mapper>